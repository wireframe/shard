<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
	"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

	<bean id="windowCommandManager"
		class="org.springframework.richclient.application.support.ApplicationWindowCommandManager">
		<property name="sharedCommandIds">
			<list>
				<value>newCommand</value>
				<value>openCommand</value>
				<value>importCommand</value>
				<value>printCommand</value>
			</list>
		</property>
	</bean>

	<bean id="menuBar"
		class="org.springframework.richclient.command.CommandGroupFactoryBean">
		<property name="members">
			<list>
				<ref bean="fileMenu"/>
				<ref bean="windowMenu"/>
				<ref bean="helpMenu"/>
			</list>
		</property>
	</bean>

	<bean id="fileMenu"
		class="org.springframework.richclient.command.CommandGroupFactoryBean">
		<property name="members">
			<list>
				<ref bean="newCommand" />
				<value>separator</value>
				<value>openCommand</value>
				<ref bean="importCommand" />
				<value>printCommand</value>
				<value>separator</value>
				<bean class="org.springframework.richclient.command.support.ExitCommand"/>
			</list>
		</property>
	</bean>

	<bean id="windowMenu"
		class="org.springframework.richclient.command.CommandGroupFactoryBean">
		<property name="members">
			<list>
				<bean class="org.springframework.richclient.command.support.NewWindowCommand"/>
				<value>separator</value>
				<bean class="org.springframework.richclient.command.support.ShowViewMenu"/>
				<value>separator</value>
			</list>
		</property>
	</bean>

	<bean id="helpMenu"
		class="org.springframework.richclient.command.CommandGroupFactoryBean">
		<property name="members">
			<list>
				<ref bean="helpContentsCommand"/>
				<value>separator</value>
				<ref bean="aboutCommand"/>
			</list>
		</property>
	</bean>

	<bean id="helpContentsCommand"
		class="org.springframework.richclient.command.support.HelpContentsCommand"/>

	<bean id="aboutCommand"
		class="org.springframework.richclient.command.support.AboutCommand">
		<property name="aboutTextPath">
			<value>about.html</value>
		</property>
	</bean>

	<bean id="newCommand"
		class="org.springframework.richclient.command.TargetableActionCommand">
		<property name="commandExecutor">
			<ref bean="newCharacterWizard"/>
		</property>
	</bean>

	<bean id="importCommand"
		class="org.springframework.richclient.command.TargetableActionCommand">
		<property name="commandExecutor">
			<ref bean="importCommandExecutor"/>
		</property>
	</bean>



  <bean id="importCommandExecutor"
   class="com.codecrate.shard.ui.command.ImportDatasetCommand">
    <constructor-arg><ref bean="raceDao" /></constructor-arg>
    <constructor-arg><ref bean="objectImporter" /></constructor-arg>
  </bean>

  <bean id="importDatasetCommand"
   class="com.codecrate.shard.ui.command.SpecificApplicationEventActionCommandExecutor">
    <constructor-arg><value>com.codecrate.shard.ui.command.ImportDatasetEvent</value></constructor-arg>
    <constructor-arg>
      <bean class="com.codecrate.shard.ui.command.EventDispatcherThreadActionCommandExecutor">
        <constructor-arg>
          <bean class="com.codecrate.shard.ui.command.ApplicationWindowProgressMonitorActionCommandExecutor">
            <constructor-arg>
              <bean class="com.codecrate.shard.ui.command.FoxtrotBackgroundJobActionCommandExecutor">
	            <constructor-arg>
	              <bean class="com.codecrate.shard.ui.command.MethodInvokingActionCommandExecutor">
	                <property name="targetObject"><ref bean="importDatasetService"/></property>
	                <property name="targetMethod"><value>importDataset</value></property>
	              </bean>
	            </constructor-arg>
              </bean>
            </constructor-arg>
          </bean>
        </constructor-arg>
      </bean>
    </constructor-arg>
  </bean>

</beans>