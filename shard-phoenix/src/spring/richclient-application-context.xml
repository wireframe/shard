<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">
<!-- $Id: richclient-application-context.xml,v 1.16 2005/07/28 16:52:20 wireframe Exp $ -->
<beans>
	
	<bean id="application" 
		class="org.springframework.richclient.application.Application">
		<constructor-arg index="0">
			<ref bean="applicationDescriptor"/>
		</constructor-arg>
		<constructor-arg index="1">
			<ref bean="lifecycleAdvisor"/>
		</constructor-arg>
	</bean>

	<bean id="lifecycleAdvisor" 
		class="org.springframework.richclient.application.config.DefaultApplicationLifecycleAdvisor">
		<property name="windowCommandBarDefinitions">
			<value>commands-context.xml</value>
		</property>
		<property name="startingPageId">
			<value>skillManagerView</value>
		</property>
	</bean>

	<bean id="applicationDescriptor" 
		class="com.codecrate.shard.ShardApplicationDescriptor">
	</bean>
	
	<bean id="applicationObjectConfigurer"
		class="org.springframework.richclient.application.config.DefaultApplicationObjectConfigurer">
		<constructor-arg index="0">
			<ref bean="messageSource"/>
		</constructor-arg>
		<constructor-arg index="1">
			<ref bean="imageSource"/>
		</constructor-arg>
		<constructor-arg index="2">
			<ref bean="iconSource"/>
		</constructor-arg>
	</bean>
		
	<bean id="applicationEventMulticaster" 
		class="org.springframework.context.event.SimpleApplicationEventMulticaster"/>
		
	<bean id="componentFactory" 
		class="org.springframework.richclient.factory.DefaultComponentFactory">
		<property name="iconSource">
			<ref bean="iconSource"/>
		</property>
		<property name="messageSource">
			<ref bean="messageSource"/>
		</property>
	</bean>

	<bean id="lookAndFeelConfigurer" 
		class="org.springframework.richclient.application.config.JGoodiesLooksConfigurer">
		<property name="theme">
			<bean class="com.jgoodies.looks.plastic.theme.ExperienceBlue"/>
		</property>
	</bean>
	
	<bean id="messageSource" 
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames">
			<list>
				<value>messages</value>
				<value>org.springframework.richclient.application.messages</value>
			</list>
		</property>
	</bean>
	
	<bean id="imageResourcesFactory" 
		class="org.springframework.context.support.ResourceMapFactoryBean">
		<property name="locations">
			<list>
				<value>classpath:org/springframework/richclient/image/images.properties</value>
				<value>classpath:images.properties</value>
			</list>
		</property>
		<property name="resourceBasePath">
			<value>images/</value>
		</property>
	</bean>
	
	<bean id="imageSource" 
		class="org.springframework.richclient.image.DefaultImageSource">
		<constructor-arg index="0">
			<ref bean="imageResourcesFactory"/>
		</constructor-arg>
		<property name="brokenImageIndicator">
			<value>images/alert/error_obj.gif</value>
		</property>
	</bean>
	
	<bean id="iconSource" 
		class="org.springframework.richclient.image.DefaultIconSource">
		<constructor-arg index="0">
			<ref bean="imageSource"/>
		</constructor-arg>
	</bean>
	
	<bean id="formComponentInterceptorFactory" 
		class="org.springframework.richclient.form.builder.support.ChainedInterceptorFactory">
		<property name="interceptorFactories">
			<list>
				<bean class="org.springframework.richclient.form.builder.support.ColorValidationInterceptorFactory">
					<property name="errorColor">
						<value>255,245,245</value>
					</property>
				</bean>
				<bean class="org.springframework.richclient.form.builder.support.OverlayValidationInterceptorFactory"/>
				<bean class="org.springframework.richclient.text.TextComponentPopupInterceptorFactory"/>
				<bean class="org.springframework.richclient.list.ComboBoxAutoCompletionInterceptorFactory">
					<property name="messageSource">
						<ref bean="messageSource"/>
					</property>
				</bean>
			</list>
		</property>
	</bean>

    <bean id="formPropertyFaceDescriptorSource" 
		class="org.springframework.binding.form.support.MessageSourceFormPropertyFaceDescriptorSource"/>    

    <!-- skill manager view -->
	<bean id="skillManagerView"
		class="org.springframework.richclient.application.support.LookupViewDescriptor">
		<property name="viewPrototypeBeanName">
			<value>skillManager</value>
		</property>
	</bean>

	<bean id="skillManager"
	    class="com.codecrate.shard.ui.view.SkillManagerView"
	    singleton="false">
	    <constructor-arg><ref bean="skillCommandAdapter" /></constructor-arg>
	    <constructor-arg><ref bean="skillFormFactory" /></constructor-arg>
	</bean>

    <bean id="skillFormFactory"
        class="com.codecrate.shard.ui.form.SkillFormFactory">
        <constructor-arg><ref bean="abilityDao" /></constructor-arg>
    </bean>
    
    <bean id="skillCommandAdapter"
        class="com.codecrate.shard.ui.command.SkillCommandAdapter">
        <constructor-arg index="0"><ref bean="skillDao" /></constructor-arg>
        <constructor-arg index="1"><ref bean="skillDao" /></constructor-arg>
        <property name="deleteMessagePropertyName">
          <value>confirmDeleteSkillDialog</value>
        </property>
    </bean>

	<!-- feat manager view -->
	<bean id="featManagerView"
		class="org.springframework.richclient.application.support.LookupViewDescriptor">
		<property name="viewPrototypeBeanName">
			<value>featManager</value>
		</property>
	</bean>

	<bean id="featManager"
	    class="com.codecrate.shard.ui.view.FeatManagerView"
	    singleton="false">
	    <constructor-arg><ref bean="featCommandAdapter" /></constructor-arg>
	    <constructor-arg><ref bean="featFormFactory" /></constructor-arg>
	</bean>

    <bean id="featFormFactory"
        class="com.codecrate.shard.ui.form.FeatFormFactory">
    </bean>
    
    <bean id="featCommandAdapter"
        class="com.codecrate.shard.ui.command.FeatCommandAdapter">
        <constructor-arg index="0"><ref bean="featDao" /></constructor-arg>
        <constructor-arg index="1"><ref bean="featDao" /></constructor-arg>
        <property name="deleteMessagePropertyName">
          <value>confirmDeleteFeatDialog</value>
        </property>
    </bean>

	<!-- item manager view -->
	<bean id="itemManagerView"
		class="org.springframework.richclient.application.support.LookupViewDescriptor">
		<property name="viewPrototypeBeanName">
			<value>itemManager</value>
		</property>
	</bean>

	<bean id="itemManager"
	    class="com.codecrate.shard.ui.view.ItemManagerView"
	    singleton="false">
	    <constructor-arg><ref bean="itemCommandAdapter" /></constructor-arg>
	    <constructor-arg><ref bean="itemFormFactory" /></constructor-arg>
	</bean>

    <bean id="itemFormFactory"
        class="com.codecrate.shard.ui.form.ItemFormFactory">
    </bean>
    
    <bean id="itemCommandAdapter"
        class="com.codecrate.shard.ui.command.ItemCommandAdapter">
        <constructor-arg index="0"><ref bean="itemDao" /></constructor-arg>
        <constructor-arg index="1"><ref bean="itemDao" /></constructor-arg>
        <property name="deleteMessagePropertyName">
          <value>confirmDeleteItemDialog</value>
        </property>
    </bean>

    <!-- race manager view -->
	<bean id="raceManagerView"
		class="org.springframework.richclient.application.support.LookupViewDescriptor">
		<property name="viewPrototypeBeanName">
			<value>raceManager</value>
		</property>
	</bean>

	<bean id="raceManager"
	    class="com.codecrate.shard.ui.view.RaceManagerView"
	    singleton="false">
	    <constructor-arg><ref bean="raceCommandAdapter" /></constructor-arg>
	    <constructor-arg><ref bean="raceFormFactory" /></constructor-arg>
	</bean>

    <bean id="raceFormFactory"
        class="com.codecrate.shard.ui.form.RaceFormFactory">
    </bean>
    
    <bean id="raceCommandAdapter"
        class="com.codecrate.shard.ui.command.RaceCommandAdapter">
        <constructor-arg index="0"><ref bean="raceDao" /></constructor-arg>
        <constructor-arg index="1"><ref bean="raceDao" /></constructor-arg>
        <property name="deleteMessagePropertyName">
          <value>confirmDeleteRaceDialog</value>
        </property>
    </bean>
</beans>
