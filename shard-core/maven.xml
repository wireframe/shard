<project 
 xmlns:maven="jelly:maven"
 xmlns:j="jelly:core"> 
 
    <preGoal name="java:compile">
        <attainGoal name="xdoclet-hibernatedoclet"/>
    </preGoal>

  <!-- Generate required Xdoclet hibernatedoclet resources for this project. -->
  <goal name="xdoclet-hibernatedoclet">
    <echo>inside xdoclet-hibernatedoclet</echo>
    <mkdir dir="${maven.xdoclet.hibernatedoclet.destDir}" />

    <taskdef 
     name="hibernatedoclet"
     classname="xdoclet.modules.hibernate.HibernateDocletTask" 
     classpathref="maven.dependency.classpath" />

    <hibernatedoclet
     destdir="${maven.xdoclet.hibernatedoclet.destDir}"
     excludedtags="@version,@author,@todo"
     addedtags="@xdoclet-generated at ${TODAY},@copyright The XDoclet Team,@author XDoclet,@version ${project.version}"
     force="${maven.xdoclet.force}"
     verbose="true">
     
      <fileset dir="${maven.xdoclet.hibernatedoclet.srcDir}">
        <include name="**/*.java" />
      </fileset>
      
      <hibernate 
        version="${maven.hibernate.version}" />
      <hibernatecfg 
        dialect="${maven.hibernate.dialect}" 
        driver="${maven.hibernate.driver}" 
        jdbcUrl="${maven.hibernate.jdbcUrl}" 
		userName="${maven.hibernate.userName}" 
		password="${maven.hibernate.password}"/>
    </hibernatedoclet>

    <path 
     id="hibernatedoclet.java.compile.src.set" 
     location="${maven.xdoclet.hibernatedoclet.destDir}" />
    <maven:addPath 
     id="maven.compile.src.set" 
     refid="hibernatedoclet.java.compile.src.set" />
  </goal>
</project>